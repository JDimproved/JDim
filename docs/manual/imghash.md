---
title: NG 画像ハッシュの設定
layout: default
---
<!-- SPDX-License-Identifier: FSFAP OR GPL-2.0-or-later -->

&gt; [Top](../) &gt; [その他]({{ site.baseurl }}/info/) &gt; {{ page.title }}

## {{ page.title }}

**注意**: この機能は実験的なサポートのため、変更または廃止の可能性があります。

- [NG 画像ハッシュの概要](#summary)
- [画像をNG 画像ハッシュに登録する](#register)
- [登録されているNG 画像ハッシュを削除する](#remove)
- [NG 画像ハッシュのしきい値](#threshold)
  - [初期設定のしきい値を設定する](#threshold-inital)
  - [登録されているNG 画像ハッシュのしきい値を変更する](#threshold-change)
- [NG 画像ハッシュの設定ファイル](#file)
- [あぼ〜んされた画像からNG 画像ハッシュの情報を確認する](#info)


<a name="summary"></a>
### NG 画像ハッシュの概要

<small>v0.11.0-20240519から追加</small>  

NG 画像ハッシュを利用すると、あぼ〜んした画像と特徴が似た画像をあぼ〜んすることができます。

設定項目を表示するには、メニューバーから`設定`＞`あぼ〜ん`＞`全体あぼ〜ん設定(対象: スレビュー)`の順に選択します。
次に、`NG 画像ハッシュ`タブを開きます。

> [!NOTE]  
> 変更した設定を反映するには、OKボタンを押してダイアログを閉じてください。

#### 初期設定

NG 画像ハッシュの初期設定は**無効**です。
**有効**にするには、`全体あぼ〜ん設定(対象: スレビュー)`ダイアログの
`NG 画像ハッシュ`タブで、`NG 画像ハッシュを有効にする`をオンにします。

有効にすると、画像を読み込んだときに画像のハッシュ値を計算し、NG 画像ハッシュとマッチするかチェックします。

#### NG 画像ハッシュのデフォルト設定

デフォルト設定は設定ファイルが見つからないときに読み込まれます。
NG 画像ハッシュの設定を初期化するときはキャッシュディレクトリの`image_abone/`内にある`dhash_list.txt`を削除してからJDimを起動してください。

デフォルト設定は、大量にレスを投稿する荒らしが繰り返し書き込んでいた不適切な画像をあぼ〜んします。


<a name="register"></a>
### 画像をNG 画像ハッシュに登録する

1. 画像URL、または画像を右クリックしてメニューから`画像のプロパティ`を選択します。
2. プロパティにある`NG 画像ハッシュに追加する (この画像もあぼ〜んされる)`にチェックを入れます。
3. OKボタンを押してダイアログを閉じると設定が反映されます。


<a name="remove"></a>
### 登録されているNG 画像ハッシュを削除する

1. メニューバーから`設定`＞`あぼ〜ん`＞`全体あぼ〜ん設定(対象: スレビュー)`の順に選択し、
   `NG 画像ハッシュ`タブを開きます。
2. NG一覧から削除したいハッシュ設定をマウスクリックで選択します。
   項目を複数選択して一括操作ができます。
3. 選択した行に対する操作にある`削除`ボタンを押します。
4. OKボタンを押してダイアログを閉じると設定が反映されます。

> [!NOTE]  
> NG一覧から画像ハッシュを削除しても、そのハッシュ値でNGされた画像はあぼ〜ん解除されません。


<a name="threshold"></a>
### NG 画像ハッシュのしきい値

しきい値は、どれくらい似ていれば画像あぼ〜んの対象とするかどうかの判定基準です。

- 値は -1 から 128 までの整数で指定します。
- 値を小さくすると、より類似度の高い画像のみが対象となります。
- 値を大きくすると、類似度の低い画像も対象となるため、意図しない画像があぼ～んされる可能性があります。
- -1 は画像のあぼ〜ん判定を行いません。

例えば、しきい値を0に設定すると、全く同じ画像のみがあぼ〜んの対象になります。
値を30にすると、ある程度ノイズが入った画像もあぼ〜んの対象になります。

初期設定のしきい値を変更したり、登録されているNG 画像ハッシュのしきい値を変更することができます。


<a name="threshold-inital"></a>
### 初期設定のしきい値を設定する

初期設定のしきい値は、新たに画像を NG 画像ハッシュに登録する際に適用されます。

1. メニューバーから`設定`＞`あぼ〜ん`＞`全体あぼ〜ん設定(対象: スレビュー)`の順に選択し、
   `NG 画像ハッシュ`タブを開きます。
2. 初期設定のしきい値にある入力欄の数値を変更します。
3. OKボタンを押してダイアログを閉じると設定が反映されます。

しきい値入力欄の隣にある`リセット`ボタンを押すと、しきい値がデフォルト値に戻ります。


<a name="threshold-change"></a>
### 登録されているNG 画像ハッシュのしきい値を変更する

登録されているNG 画像ハッシュのしきい値を変更するには、プリセット値の選択と直接編集の2つの方法があります。

#### プリセット値の選択

1. メニューバーから`設定`＞`あぼ〜ん`＞`全体あぼ〜ん設定(対象: スレビュー)`の順に選択し、
   `NG 画像ハッシュ`タブを開きます。
2. NG一覧からしきい値を変更したいハッシュ設定をマウスクリックで選択します。
3. 選択した行に対する操作にある`しきい値`ボタンを押し、表示されたポップアップからプリセットのしきい値を選択します。
4. OKボタンを押してダイアログを閉じると設定が反映されます。

#### 直接編集

1. メニューバーから`設定`＞`あぼ〜ん`＞`全体あぼ〜ん設定(対象: スレビュー)`の順に選択し、
   `NG 画像ハッシュ`タブを開きます。
2. NG一覧からしきい値を変更したいハッシュ設定のしきい値をマウスクリックして入力欄に切り替えます。
3. 値を入力し、Enter キーを押すと編集が完了します。
4. OKボタンを押してダイアログを閉じると設定が反映されます。


<a name="file"></a>
### NG 画像ハッシュの設定ファイル

NG 画像ハッシュの設定は、キャッシュディレクトリの`image_abone/`内にある`dhash_list.txt`ファイルに保存されます。
設定は、全体あぼ〜ん設定ダイアログでOKボタンを押したとき、またはJDimを終了したときに保存されます。

- 設定ファイルを直接編集する場合は、JDimを終了し、ファイルをバックアップしてから行ってください。
- ファイルの破損を検知したときは読み込みが打ち切られます。

> [!NOTE]  
> ファイルのフォーマットは予告なく変更する場合があります。


<a name="info"></a>
### あぼ〜んされた画像からNG 画像ハッシュの情報を確認する

あぼ〜んされた画像のURL（初期設定では赤色で表示）をクリックすると「あぼ〜んされています」ダイアログが表示されます。
NG 画像ハッシュに登録した画像や、NG 画像ハッシュであぼ〜んされた画像は、ダイアログにNG 画像ハッシュの情報を表示します。

画像のポップアップ表示が有効になっている場合は、あぼ〜んされた画像のポップアップにもNG 画像ハッシュの情報が表示されます。
