<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="main.xsl"?>

<document header="ユーザーコマンド登録" modified="20070307">

<p>スレ一覧の右クリックメニューに自前のコマンドを登録できる。</p>
<p>JDを一度起動するとキャッシュディレクトリにできる usrcmd.txt にコマンドを登録する。</p>
<p>usrcmd.txtの形式は</p>
<p><span class="red">コマンド名</span><br /><span class="green">実行するコマンド</span></p>
<p>であり、実行するコマンドでは以下のような置換文字列を指定することが出来る。</p>

<array>
<item>
    <key class="green">$VIEW</key>
    <value>webブラウザで開く (例) $VIEW $LINK でリンクをブラウザで開く</value>
</item>

<item></item>

<item>
    <key class="green">$URL</key>
    <value>スレのURL(例: http://pc10.2ch.net/test/read.cgi/linux/1155578592/ )</value>
</item>
<item>
    <key class="green">$DATURL</key>
    <value>サーバー上のdatファイルのURL (例: http://pc10.2ch.net/linux/dat/0123456789.dat)</value>
</item>
<item>
    <key class="green">$SERVER</key>
    <value>スレのURLから取り出したサーバー名(http://などのプロトコル含む)</value>
</item>
<item>
    <key class="green">$HOSTNAME</key>
    <value>スレのURLから取り出したサーバー名(http://などのプロトコル除く)</value>
</item>

<item></item>

<item>
    <key class="green">$LINK</key>
    <value>マウスの下にリンクがあればそのURL</value>
</item>
<item>
    <key class="green">$SERVERL</key>
    <value>リンクから取り出したサーバー名(http://などのプロトコル含む)</value>
</item>
<item>
    <key class="green">$HOSTNAMEL</key>
    <value>リンクから取り出したサーバー名(http://などのプロトコル除く)</value>
</item>

<item></item>

<item>
    <key class="green">$TEXT</key>
    <value>範囲選択した文字列(UTF-8)</value>
</item>
<item>
    <key class="green">$TEXTU</key>
    <value>範囲選択した文字列(UTF-8)をURLエンコード</value>
</item>
<item>
    <key class="green">$TEXTX</key>
    <value>範囲選択した文字列をEUCに変換してURLエンコード</value>
</item>
<item>
    <key class="green">$TEXTE</key>
    <value>範囲選択した文字列をSJIS(MS932)に変換してURLエンコード</value>
</item>

<item></item>

<item>
    <key class="green">$LOCALDAT</key>
    <value>キャッシュディレクトリにあるdatファイルの場所 (例: ~/.jd/pc10.2ch.net/linux/0123456789.dat)</value>
</item>
</array>

<p>なお空白行と # から始まるコメント行は無視される。ユーザコマンドの具体的な使いかたは下の例や <a href="usrcmd_collection.xml">ユーザーコマンド設定集</a>を参照すること。</p>

<p>(usrcmd.txtの例) </p>
<p class="nowrap">
    <span class="red">googleで検索</span><br />
    <span class="green">$VIEW http://www.google.co.jp/search?hl=ja&amp;q=$TEXTU&amp;btnG=Google+%E6%A4%9C%E7%B4%A2&amp;lr=</span>
</p>
<p class="nowrap">
    <span class="red">infoseek国語辞典</span><br />
    <span class="green">$VIEW http://jiten.www.infoseek.co.jp/Kokugo?qt=$TEXTE&amp;sm=1&amp;pg=result_k.html&amp;col=KO</span>
</p>

</document>
